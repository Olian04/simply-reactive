var simplyReactive=function(a){"use strict";function b(a,b,c,d){function e(a){return a instanceof c?a:new c(function(b){b(a)})}return new(c||(c=Promise))(function(c,f){function g(a){try{i(d.next(a))}catch(a){f(a)}}function h(a){try{i(d["throw"](a))}catch(a){f(a)}}function i(a){a.done?c(a.value):e(a.value).then(g,h)}i((d=d.apply(a,b||[])).next())})}const c={},d=(a=>b=>{b.key in a||(a[b.key]={value:b.default,subscribers:{}});const c={key:b.key,set:c=>{if("function"==typeof c){const d=c;a[b.key].value=d(a[b.key].value)}else a[b.key].value=c;Object.values(a[b.key].subscribers).forEach(a=>a())},get:()=>a[b.key].value,subscribe:(c,d)=>(a[b.key].subscribers[c]=d,()=>{delete a[b.key].subscribers[c]})};return c})(c),e=(a=>b=>{const c=()=>{a[b.key].isDirty=!0,Object.values(a[b.key].subscribers).forEach(a=>a())},d=d=>{const e=d.subscribe(b.key,c);return a[b.key].unsubscribeFunctions.push(e),d.get()};b.key in a||(a[b.key]={value:null,isDirty:!0,subscribers:{},unsubscribeFunctions:[]});const e={key:b.key,get:()=>(a[b.key].isDirty&&(a[b.key].unsubscribeFunctions.forEach(a=>a()),a[b.key].unsubscribeFunctions=[],a[b.key].value=b.get({get:d}),a[b.key].isDirty=!1),a[b.key].value),subscribe:(c,d)=>(a[b.key].subscribers[c]=d,()=>{delete a[b.key].subscribers[c]})};return e})(c),f=(a=>c=>{const d=()=>{a[c.key].isDirty=!0,Object.values(a[c.key].subscribers).forEach(a=>a())},e=b=>{const e=b.subscribe(c.key,d);return a[c.key].unsubscribeFunctions.push(e),b.get()};c.key in a||(a[c.key]={value:null,isDirty:!0,subscribers:{},unsubscribeFunctions:[]});const f={key:c.key,get:()=>b(void 0,void 0,void 0,function*(){return a[c.key].isDirty&&(a[c.key].unsubscribeFunctions.forEach(a=>a()),a[c.key].unsubscribeFunctions=[],a[c.key].value=yield c.get({get:e}),a[c.key].isDirty=!1),a[c.key].value}),subscribe:(b,d)=>(a[c.key].subscribers[b]=d,()=>{delete a[c.key].subscribers[b]})};return f})(c),g=((a,b=1)=>(c,d)=>{var e;const f=((null===d||void 0===d?void 0:d.key)||b++)+"";f in a||(a[f]={notifyTimeoutId:void 0,debounceDuration:null!==(e=null===d||void 0===d?void 0:d.debounceDuration)&&void 0!==e?e:0,unsubscribeFunctions:[]});const g=b=>(b.subscribe(f,()=>-1===a[f].debounceDuration?void h():void(clearTimeout(a[f].notifyTimeoutId),a[f].notifyTimeoutId=setTimeout(h,a[f].debounceDuration))),b.get()),h=()=>{c({get:g})};h()})(c),h=()=>{const a=["graph TD;"];for(let[b,d]of Object.entries(c))if("subscribers"in d)for(let c of Object.keys(d.subscribers))a.push(`${b}-->${c};`);return a.join("\n\t")};return a.createAtom=d,a.createEffect=g,a.createResource=f,a.createSelector=e,a.visualizeDependencyGraph=h,Object.defineProperty(a,"__esModule",{value:!0}),a}({});
