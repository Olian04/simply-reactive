var simplyReactive=function(e){"use strict";const s={},t=[{registerDependency:()=>{}}],n=e=>t[t.length-1].registerDependency(e),u=e=>t.push(e),r=()=>t.pop(),i=((e=1)=>()=>e++)(),c=(o=s,e=>{const s=String((null==e?void 0:e.key)||i());s in o||(o[s]={value:e.default,subscribers:{}});const t={key:s,set:e=>{if("function"==typeof e){const t=e;o[s].value=t(o[s].value)}else o[s].value=e;Object.values(o[s].subscribers).forEach((e=>e()))},get:()=>(n(t.subscribe),o[s].value),subscribe:(e,t)=>(o[s].subscribers[e]=t,()=>{delete o[s].subscribers[e]})};return t});var o;const b=(e=>s=>{const t=String((null==s?void 0:s.key)||i()),c=()=>{e[t].isDirty=!0,Object.values(e[t].subscribers).forEach((e=>e()))};t in e||(e[t]={value:null,isDirty:!0,subscribers:{},unsubscribeFunctions:[]});const o={key:t,get:()=>(n(o.subscribe),e[t].isDirty&&(e[t].unsubscribeFunctions.forEach((e=>e())),e[t].unsubscribeFunctions=[],u({registerDependency:s=>{const n=s(t,c);e[t].unsubscribeFunctions.push(n)}}),e[t].value=s.get(),e[t].isDirty=!1,r()),e[t].value),subscribe:(s,n)=>(e[t].subscribers[s]=n,()=>{delete e[t].subscribers[s]})};return o})(s);var a;!function(e){e.Discard="discard",e.Flush="flush",e.FlushDebounced="flush-debounced"}(a||(a={}));const l=(e=>(s,t)=>{var n;const c=String((null==t?void 0:t.key)||i());c in e||(e[c]={notifyTimeoutId:void 0,debounceDuration:null!==(n=null==t?void 0:t.debounceDuration)&&void 0!==n?n:0,unsubscribeFunctions:[]});const o=()=>{e[c].unsubscribeFunctions.forEach((e=>e())),e[c].unsubscribeFunctions=[]},b=()=>{o(),u({registerDependency:s=>{const t=s(c,(()=>{-1!==e[c].debounceDuration?(clearTimeout(e[c].notifyTimeoutId),e[c].notifyTimeoutId=setTimeout(b,e[c].debounceDuration)):b()}));e[c].unsubscribeFunctions.push(t)}}),s(),r()};return b(),(t=a.Discard)=>{if(void 0===e[c])return;const n=()=>{s()},u=()=>{o(),clearTimeout(e[c].notifyTimeoutId),e[c].notifyTimeoutId=void 0,e[c].debounceDuration=0,e[c].unsubscribeFunctions=[],delete e[c]};switch(t){case a.Discard:u();break;case a.Flush:n(),u();break;case a.FlushDebounced:clearTimeout(e[c].notifyTimeoutId),setTimeout((()=>{n(),u()}),0);default:throw new Error(`Unknown DebounceCleanupStrategy: ${t}`)}}})(s);return e.createAtom=c,e.createEffect=l,e.createGroup=()=>{throw new Error("Not yet implemented")},e.createResource=e=>{const s=c({default:0}),t=b({key:e.key,get:()=>(s.get(),e.get())});return{key:t.key,get:()=>t.get(),invalidate:()=>s.set((e=>e+1))}},e.createSelector=b,e.visualizeDependencyGraph=()=>{const e=["graph TD;"];for(let[t,n]of Object.entries(s))if("subscribers"in n)for(let s of Object.keys(n.subscribers))e.push(`${t}--\x3e${s};`);return e.join("\n\t")},e}({});
